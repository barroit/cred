# SPDX-License-Identifier: GPL-3.0-or-later
# Written with reference to OpenSSLConfig.cmake

set(osslcmake sqlite/build.crypto/lib64/cmake sqlite/build.crypto/lib/cmake)

find_package(OpenSSL REQUIRED HINTS ${osslcmake})

set(prefix ${TREE}/sqlite/install)
set(libdir ${prefix}/lib)
set(incdir ${prefix}/include)

if(UNIX)
  set(ext a)
elseif(WIN32)
  set(ext lib)
endif()

set(libsqlite  ${libdir}/libsqlite3.${ext})
set(dependency OpenSSL::Crypto)

add_library(SQLite::SQLite STATIC IMPORTED)

set_target_properties(SQLite::SQLite PROPERTIES
		      IMPORTED_LOCATION ${libsqlite}
		      IMPORTED_LINK_INTERFACE_LANGUAGES C
		      INTERFACE_LINK_LIBRARIES ${dependency}
		      INTERFACE_INCLUDE_DIRECTORIES ${incdir})

set(SQLITE_INCLUDE_DIR ${incdir} PARENT_SCOPE)
set(SQLITE_LIBRARIES ${libsqlite} ${dependency} PARENT_SCOPE)
